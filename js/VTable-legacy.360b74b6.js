(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["VTable"],{1339:function(t,e,n){},9978:function(t,e,n){"use strict";var a=n("1339"),r=n.n(a);r.a},e91f:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative"}},[n("ATable",t._g(t._b({attrs:{"row-selection":t.rowSelection,"row-key":t.rowKey,pagination:t.pagination&&Object.assign({},t.pagination,{total:t.total},t.tableParams),columns:t.slotColumns,loading:t.loading,"data-source":t.tableData},on:{change:t.setTableParams},scopedSlots:t._u([t._l(t.slotColumns,function(e){return{key:e.scopedSlots.customRender,fn:function(a,r,i){return[t._t(e.scopedSlots.customRender,[n("span",{key:e.dataIndex+i,staticClass:"table-cell"},[t._v(t._s(a))])],null,{row:r,column:e,index:i,value:a})]}}})],null,!0)},"ATable",t.$attrs,!1),t.$listeners)),t.isXlsx&&"function"===typeof t.xlsx&&!t.loading?n("TableToXlsx",{attrs:{"is-selection":!!t.selection,loading:t.loading},on:{export:function(e){return t.exportXlsx(t.tableData)},"export-selected":function(e){return t.exportXlsx(t.selectedData)},"export-all":function(e){return t.exportAllXlsx()}}}):t._e()],1)},r=[],i=n("a34a"),s=n.n(i),o={props:{rowKey:{type:[Function,String],required:!0},notNumber:Boolean,isFixedNumber:{type:Boolean,default:!1},notAuto:Boolean,isPaging:Boolean,columns:{type:Array,required:!0,validator:function(t){return t.every(function(t){return void 0!==(t.key||t.dataIndex)})}},http:Function,dataSource:Array,isXlsx:Boolean,xlsx:Function,fileName:{type:String,default:"file"},params:Object,pagination:{type:[Object,Boolean],default:function(){return{position:"bottom",showSizeChanger:!0,showQuickJumper:!0,showTotal:function(t){return"共 ".concat(t," 条")}}}},current:{type:Number,default:1},pageSize:{type:Number,default:10},selection:{type:[Object,Boolean],default:!1},handler:{type:Function,default:function(t){return t}},isReload:Boolean},watch:{params:{handler:function(t,e){t&&!l(t,e)&&(this.tableParams.current=1,this.total=0,this.setTableList())},deep:!0},current:{handler:function(t){this.tableParams.current=Math.max(t,1)},immediate:!0},pageSize:{handler:function(t){this.tableParams.pageSize=Math.max(t,1)},immediate:!0},isReload:function(t){t&&this.setTableList()}}},l=function(t,e){var n=[JSON.stringify(t),JSON.stringify(e)],a=n[0],r=n[1];return a===r};function c(t,e,n,a,r,i,s){try{var o=t[i](s),l=o.value}catch(c){return void n(c)}o.done?e(l):Promise.resolve(l).then(a,r)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var i=t.apply(e,n);function s(t){c(i,a,r,s,o,"next",t)}function o(t){c(i,a,r,s,o,"throw",t)}s(void 0)})}}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){d(t,e,n[e])})}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}var p={name:"VTable",components:{TableToXlsx:function(){return n.e("TableXlsx").then(n.bind(null,"8d67"))}},mixins:[o],data:function(){return{tableParams:{current:1,pageSize:10},total:0,selectedData:[],tableData:[],loading:!0}},computed:{slotColumns:function(){return b(this)},rowSelection:function(){if(!this.selection)return null;var t={fixed:!0,selectedRowKeys:this.selectAllKeys,onSelect:this.selectOneHandler,onSelectAll:this.selectAllHandler};return"object"===f(this.selection)?h({},t,this.selection):t},selectAllKeys:function(){var t=this;return this.selectedData.map(function(e){return y(e,t.rowKey)})}},created:function(){this.notAuto||this.setTableList()},methods:{setTableParams:function(t){var e=t.current,n=t.pageSize;this.tableParams={current:e,pageSize:n},this.$emit("change-params",{current:e,pageSize:n}),this.setTableList()},setTableList:function(){var t=u(s.a.mark(function t(){var e,n,a,r;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,!this.isPaging&&!Array.isArray(this.dataSource)){t.next=12;break}if(this.total&&!this.isReload){t.next=9;break}return t.next=5,this.getData(this.params);case 5:e=t.sent,n=[e.total,e.data],this.total=n[0],this.tableData=n[1];case 9:this.$emit("change",m(this.tableData,this.tableParams)),t.next=19;break;case 12:return t.next=14,this.getData(h({},this.tableParams,this.params));case 14:a=t.sent,r=[a.total,a.data],this.total=r[0],this.tableData=r[1],this.$emit("change",this.tableData);case 19:this.isReload&&this.$emit("update:is-reload",!1),this.loading=!1;case 21:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getData:function(){var t=u(s.a.mark(function t(e){var n,a;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(this.dataSource)){t.next=3;break}return n=this.handler(this.dataSource),t.abrupt("return",{data:n,total:n.length});case 3:return a={},t.prev=4,t.next=7,this.http(e);case 7:a=t.sent,a.data=this.handler(a.data),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),a={data:[],total:0};case 14:return t.abrupt("return",a);case 15:case"end":return t.stop()}},t,this,[[4,11]])}));function e(e){return t.apply(this,arguments)}return e}(),selectAllHandler:function(t,e,n){var a=this;n.forEach(function(e){return a.changeSelection(e,t)}),this.$emit("select",this.selectedData,n,t)},selectOneHandler:function(t,e){this.changeSelection(t,e),this.$emit("select",this.selectedData,[t],e)},changeSelection:function(t,e){var n=this,a=y(t,this.rowKey),r=this.selectedData.findIndex(function(t){return y(t,n.rowKey)===a});e?r<0&&this.selectedData.push(t):r>-1&&(this.selectedData.splice(r,1),this.changeSelection(t,!1))},exportXlsx:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fileName;this.xlsx({dataSource:t,columns:this.columns,fileName:e})},exportAllXlsx:function(){var t=u(s.a.mark(function t(){var e,n,a,r=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:1,t.prev=1,n=[],a={current:e,pageSize:500},!this.isPaging&&!Array.isArray(this.dataSource)){t.next=8;break}n=m(this.tableData,a),t.next=12;break;case 8:if(!this.http){t.next=12;break}return t.next=11,this.getData(h({},a,this.params));case 11:n=t.sent.data;case 12:if(this.exportXlsx(n,this.fileName+e),!(n.length<500)){t.next=15;break}return t.abrupt("return");case 15:return t.next=17,this.exportAllXlsx(e+1);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](1),this.$message.error("导出失败！");case 22:case"end":return t.stop()}},t,this,[[1,19]])}));function e(){return t.apply(this,arguments)}return e}()}},b=function(t){var e=t.columns,n=t.notNumber,a=t.isFixedNumber,r=t.tableParams,i=r.current,s=r.pageSize,o=e.map(function(t){return h({key:t.scopedSlots?t.key||t.dataIndex:x(t.key||t.dataIndex),fixed:a,dataIndex:t.dataIndex||t.key,scopedSlots:{customRender:t.dataIndex||t.key}},t)});return!n&&o.length&&"index"!==o[0].type&&o.unshift({type:"index",title:"序号",width:68,customRender:function(t,e,n){return(i-1)*s+n+1},scopedSlots:{customRender:"index"}}),o},m=function(t,e){var n=e.current,a=e.pageSize,r=(n-1)*a;return t.slice(r,r+a)},y=function(t,e){return"string"===typeof e?e.split(".").reduce(function(t,e){return t[e]},t):"function"===typeof e?e(t):t},x=function(t){return t},g=p,v=(n("9978"),n("2877")),S=Object(v["a"])(g,a,r,!1,null,"c6575b12",null);e["default"]=S.exports}}]);